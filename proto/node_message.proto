syntax = "proto3";
package pb;

option go_package = "github.com/snple/beacon/pb;pb";

import "nson.proto";

// Node 设备节点（完整配置，包含嵌套的 Wire 和 Pin）
message Node {
    string id = 1;
    string name = 2;
    string device = 3;  // 设备模板 ID
    repeated string tags = 4;  // 节点标签列表
    sint32 status = 5;
    int64 updated = 6;
    repeated Wire wires = 7;
}

// Wire 通道配置
message Wire {
    string id = 1;
    string name = 2;
    repeated string tags = 3;
    string type = 4;
    repeated Pin pins = 5;
}

// Pin 点位配置
message Pin {
    string id = 1;
    string name = 2;
    repeated string tags = 3;
    string addr = 4;
    uint32 type = 5;  // nson.DataType 类型码
    sint32 rw = 6;
}

// PinValue 点位值
message PinValue {
    string id = 1;
    pb.NsonValue value = 2;
    int64 updated = 3;
}

// PinNameValue 按名称的点位值
message PinNameValue {
    string name = 1;
    pb.NsonValue value = 2;
    int64 updated = 3;
}
